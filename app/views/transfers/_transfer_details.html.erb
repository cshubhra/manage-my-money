<% id = transfer_details.id %>
<% columns_count = 3 %>
<% current_category_id ||= nil %>
<% include_subcategories ||= nil %>
<% options = {:current_category => current_category_id, :include_subcategories => include_subcategories} %>

<table id="<%= "transfer-details-id-#{id}" -%>" class="nice-table">
  <tr>
    <td colspan="<%=columns_count-%>" id="flash-notice-<%=id-%>" >
    </td>
  </tr>

  <% [:income, :outcome].each do |type| %>
    <tr class="line-income-outcome" >
      <th colspan="<%=columns_count-%>" class="in-header" style="background-color: #EBAB63;">
        <%= I18n.t type, :scope => [:types] %>
      </th>
    </tr>
    <%= render :partial => 'transfer_item_details' , :collection => transfer_details.transfer_items.of_type(type) %>
  <% end %>

  <tr class="line-income-outcome" >
    <td colspan="<%=columns_count-%>">
      <span class="what-to-do" >
        <%= link_to_function('Ukryj szczegóły') do |page|
          page["transfer-details-id-#{id}"].remove
          page["show-details-button-#{id}"].show
        end %>
      </span>
      |
      <span class="what-to-do" >
        <%= link_to_remote "Edytuj transfer", :url => {:action => :edit, :controller => :transfers, :id => id}.merge(options), :method => :get %>
      </span>
      |
      <span>
        <%= link_to_remote "Usuń", :url => {:action => :destroy, :controller => :transfers, :id => id}.merge(options), :method => :delete %>
      </span>
    </td>
  </tr>
</table>
