
<% current_category ||= nil %>
<% embedded ||= nil %>
<% form_remote_for transfer do |f| %>

<%= hidden_field_tag :embedded, embedded unless embedded %>
<%= hidden_field_tag :current_category, current_category.id unless current_category.nil? %>

<div id="transfer-errors">
  
</div>
<div>
  <h3>Opis</h3>
  <%= f.text_area :description, :cols => 60, :rows => 4 %>
</div>

<hr class="hr-line-100prc" />
  
<div>
  <h3>Data</h3>
  <%= f.date_select :day  %></p>
</div>

<hr class="hr-line-100prc" />
<% types = [[:outcome, 'Rozchód'],[:income, 'Przychód']] %>
<% types.each do |type| %>
  <div>
    <h3><%= type[1] -%></h3>
	  <table id="full-<%= type[0].to_s -%>-items">
        <tr>
          <td> <span>Kategoria</span> </td>
          <td> <span>Opis</span> </td>
          <td> <span>Wartość</span> </td>
          <td> <span>Waluta</span> </td>
        </tr>
	    <%= render :partial => 'transfers/transfer_item', :collection => transfer.transfer_items.select {|ti| ti.transfer_item_type == type[0]} %>
	  </table>
      <%= add_transfer_item(type[0]) %>
  </div>

  <%= "<hr class='hr-line-100prc' />" if types.first == type %>

  <% end %>
<hr class="hr-line-100prc" />

<%= submit_tag 'save' %>

<% end %>