<div class="report-generator-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Generate Report</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="reportForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Report Name</mat-label>
            <input matInput formControlName="reportName" placeholder="Enter report name">
            <mat-error *ngIf="reportForm.get('reportName')?.hasError('required')">
              Report name is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Report Type</mat-label>
            <mat-select formControlName="reportType">
              <mat-option *ngFor="let type of reportTypes" [value]="type.value">
                {{type.label}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="reportForm.get('reportType')?.hasError('required')">
              Report type is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Format</mat-label>
            <mat-select formControlName="format">
              <mat-option *ngFor="let format of formats" [value]="format.value">
                {{format.label}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="reportForm.get('format')?.hasError('required')">
              Format is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>Columns</mat-label>
            <mat-select formControlName="columns" multiple>
              <mat-option *ngFor="let column of availableColumns" [value]="column.value">
                {{column.label}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="reportForm.get('columns')?.hasError('required')">
              At least one column must be selected
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-actions">
          <button mat-flat-button color="primary" type="submit" [disabled]="reportForm.invalid || loading">
            <mat-icon>file_download</mat-icon>
            Generate Report
          </button>
          <button mat-stroked-button type="button" (click)="reportForm.reset()" [disabled]="loading">
            Clear
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
</div>