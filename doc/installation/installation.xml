<?xml version="1.0" encoding="UTF-8"?>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:m="http://www.w3.org/1998/Math/MathML"
      xmlns:html="http://www.w3.org/1999/xhtml"
      xmlns:db="http://docbook.org/ns/docbook">
    <info>
        <title>Instalacja Manage My Money</title>
        <subtitle></subtitle>
        <author>
            <personname>
                <firstname>Robert</firstname>
                <surname>Pankowecki</surname>
            </personname>
        </author>

        <author>
            <personname>
                <firstname>Jarosław</firstname>
                <surname>Plebański</surname>
            </personname>
        </author>

        <pubdate>17 marzec 2009</pubdate>
    </info>

    <chapter>
        <title>Sposoby instalacji
        </title>

        <section>
            <title>Wstęp</title>
            #FIXME: English!
            Istnieje bardzo dużo możliwych kombinacji w jakich może zostać wdrożona nasza aplikacja.
            Im więcej posiadasz doświadczenia z Ruby on Rails tym bardziej ten proces jest dla Ciebie
            oczywisty i tym więcej możliwości możesz sobie wyobrazić i pewnie dokładnie wiesz co należy
            zrobić aby system działal poprawnie. Tym samym niniejsza instrukcja nie jest skierowana do
            najbardziej doświadczonych osób, lecz raczej do początkujących, którzy chcieliby łatwo
            uzyskać działający system. Z tego powodu zdecydowaliśmy się opisać i zautomatyzować konfigurację
            aplikacji w dwóch możliwych wariantach:

            <itemizedlist>
                <listitem>
                    <simpara>
                        Globalna - Użytkownik posiada system Ubuntu i prawa administracyjne do niego oraz pragnie
                        zainstalować aplikację, tak by była dostępna dla wszystkich użytkowników. Jak największa
                        część bibliotek zostanie zainstalowana globalnie, tak by mogła być w przyszłości współdzielona.
                    </simpara>

                </listitem>
                <listitem>
                    <simpara>
                        Lokalna - Użytkownik posiada system Ubuntu, jednak brak mu wystarczających praw administracyjnych.
                        Część niezbędnych do działania bibliotek musi być już dostępna w systemie, pozostałe zostaną
                        zainstalowane w katalogu domowym użytkownika.
                    </simpara>
                </listitem>
            </itemizedlist>

            Ponieważ dystrybucja Ubuntu pochodzi od Debiania doświadczeni użytkownicy powinni móc bez większych problemów
            skorzystać ze skryptów także w tej dystrybucji. Dla osób, które chcą przetestować w jak najszybszy sposób aplikację
            przygotowaliśmy obraz systemu operacyjnego z wykonanymi już wszystkimi krokami, który można uruchomić korzystając z
            wirtualnej maszyny VirtualBox.

        </section>

        <section>

        </section>


    </chapter>

    <chapter>
        <title>
            Globalna instalacja aplikacji
        </title>

        <section>
            <title>Wstęp</title>
            Ubuntu 8.10 i chcemy zainstalować komponenty globalnie.
        </section>

        <section>
            <title>
                Wymagane pakiety i gemy
            </title>
            Do działania aplikacji wymagane są następujące pakiety (lub czasem wystarczą odpowiadające im binarki przekompilowane samodzielnie):
            <itemizedlist>
                <listitem>
                    <para>
                        ruby - Wymagany w wersji conajmniej 1.8.7 ale nie 1.9. Instalacja:
                        <programlisting>sudo apt-get install ruby-full</programlisting>
                        Wersja:
                        <programlisting>rupert@puchatek:~$ ruby -v
ruby 1.8.7 (2008-08-11 patchlevel 72) [i486-linux]
                        </programlisting>
                    </para>
                </listitem>

                <listitem>
                    <para>
                        rubygems - Wymagane w wersji conajmniej 1.3.1 Instalacja na podstawie https://help.ubuntu.com/community/RubyOnRails :
                        <programlisting>wget http://rubyforge.org/frs/download.php/45905/rubygems-1.3.1.tgz
tar xzvf rubygems-1.3.1.tgz
cd rubygems-1.3.1
sudo ruby setup.rb
sudo ln -s /usr/bin/gem1.8 /usr/bin/gem
sudo gem update --system
cd ..
                        </programlisting>
                    </para>
                </listitem>

                <listitem>
                    <para>
                        rails - Wymagane w wersji 2.3.2 conajmniej. Instalacja:
                        <programlisting>sudo gem install rails -v 2.3.2 --no-rdoc --no-ri</programlisting>
                    </para>
                </listitem>

                <listitem>
                    <para>
                        Dodatkowe wymagane gemy wraz z pakietami niezbędnymi do ich zbudowania:
                        <programlisting>
sudo gem sources -a http://gems.github.com

sudo gem install packet --no-rdoc --no-ri
sudo gem install chronic --no-rdoc --no-ri

sudo gem install collections --no-rdoc --no-ri

sudo gem install mislav-will_paginate --no-rdoc --no-ri

sudo apt-get install libxslt-dev libxslt-ruby
sudo gem install nokogiri  --no-rdoc --no-ri


# For stats only:
sudo gem install flay  --no-rdoc --no-ri
sudo gem install flog --no-rdoc --no-ri
sudo gem install railroad --no-rdoc --no-ri
sudo gem install reek --no-rdoc --no-ri
sudo gem install roodi --no-rdoc --no-ri
sudo gem install rspec-rails --no-rdoc --no-ri

sudo gem install jscruggs-metric_fu --no-rdoc --no-ri
sudo gem install mergulhao-rcov --no-rdoc --no-ri

#TODO: Selenium
                        </programlisting>

                    </para>
                </listitem>

                <listitem>
                    <para>
                        System bazy danych: postgre - Wymagane w wersji 8.3. Instalacja:
                        <programlisting>sudo apt-get install postgresql
sudo apt-get install postgresql-client
sudo apt-get install libpq-dev
sudo gem install postgres
                        </programlisting>

Tworzenie wymaganych baz:
                        <programlisting>
sudo su postgres
createdb money_development -E UTF8

Analogicznie dla: money_test
Analogicznie dla: money_selenium

createuser test_3m -S -d -R -P

exit
                        </programlisting>


                    </para>
                </listitem>

                <listitem>
                    <para>
                        Sphinx: (For transaction and transaction items description autocomplete feature).
                        More informations about installing sphinx : http://www.sphinxsearch.com/docs/current.html#installation .
                        Be sure to compile it with pgsql support.
                    </para>
                </listitem>

                <listitem>
                    <para>
                        System cachowania danych: memcached
                        <programlisting>
sudo apt-get install memcached
                        </programlisting>
                    </para>
                </listitem>


            </itemizedlist>
        </section>
    </chapter>

    <chapter>
        <title>
            Configuration
        </title>

        <section>
            <title>
                Setting up files
            </title>
            Rename all *_example files in config/ directory and edit them to suit your needs.
        </section>

        <section>
            <title>
                Running migrations
            </title>
            Run rake db:migrate:all task to create proper databases.
        </section>

        <section>
            <title>
                Running tests
            </title>
            Run rake test task to check tests.
        </section>

        <section>
            <title>
                Starting memcached
            </title>
            <programlisting>$ memcached -p PORT_NUMBER</programlisting>
        </section>

        <section>
            <title>
                Running server
            </title>Run
            <programlisting>$ ./script/console</programlisting>
            inside your application directory.
        </section>
    </chapter>

</book>
